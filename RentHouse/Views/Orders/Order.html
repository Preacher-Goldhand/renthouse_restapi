<!doctype html>
<html>

<head>
    <title>Januszex-Express Zamowienia</title>
    <meta charset="UTF-8">
    <style>
                .material-symbols-outlined {
            transform: scale(5);
            font-variation-settings:
                'FILL' 0,
                'wght' 120,
                'GRAD' 0,
                'opsz' 24
        }
    
        body{
            color: #393636;
            height: 100%;
            overflow: hidden;

        }

        

        .btn{
            color: white;
            display: inline-block;
            padding: 6px 12px;
            margin-bottom: 0;
            font-size: 14px;
            font-weight: 400;
            line-height: 1.42857143;
            text-align: center;
            white-space: nowrap;
            vertical-align: middle;
            touch-action: manipulation;
            cursor: pointer;
            -webkit-user-select: none;
            -ms-user-select: none;
            user-select: none;
            background-image: none;
            border-radius: 4px;
            background-image: -webkit-linear-gradient(top, #5cb85c 0, #419641 100%);
            background-image: -o-linear-gradient(top, #5cb85c 0, #419641 100%);
            background-image: -webkit-gradient(linear, left top, left bottom, color-stop(0, #5cb85c), to(#419641));
            background-image: linear-gradient(to bottom, #5cb85c 0, #419641 100%);
            filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#ff5cb85c', endColorstr='#ff419641', GradientType=0);
            filter: progid:DXImageTransform.Microsoft.gradient(enabled = false);
            background-repeat: repeat-x;
            border-color: #3e8f3e;
            
        }
        
        .btn2{
            color: white;
            display: inline-block;
            padding: 6px 12px;
            margin-bottom: 0;
            font-size: 14px;
            font-weight: 400;
            line-height: 1.42857143;
            text-align: center;
            white-space: nowrap;
            vertical-align: middle;
            touch-action: manipulation;
            cursor: pointer;
            -webkit-user-select: none;
            -ms-user-select: none;
            user-select: none;
            background-image: none;
            border-radius: 4px;
            background-image: -webkit-linear-gradient(top, #ebd913 0, #419641 100%);
            background-image: -o-linear-gradient(top, #ebd913 0, #419641 100%);
            background-image: -webkit-gradient(linear, left top, left bottom, color-stop(0, #ebd913), to(#419641));
            background-image: linear-gradient(to bottom, #ebd913 0, #419641 100%);
            filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#ffebd913', endColorstr='#ff419641', GradientType=0);
            filter: progid:DXImageTransform.Microsoft.gradient(enabled = false);
            background-repeat: repeat-x;
            border-color: #3e8f3e;
            
        }


        .rendered-form{
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .footer {
            width: 100%;
            background-color: #ffda8da6;
            position: absolute;
            bottom: 10px;
            height: 30px;
            -webkit-box-shadow: 8px 8px 21px -10px rgba(66, 68, 90, 1);
            -moz-box-shadow: 8px 8px 21px -10px rgba(66, 68, 90, 1);
            box-shadow: 8px 8px 21px -10px rgba(66, 68, 90, 1); 
        }

        .header  {
            width: 100%;
            background-color: #ffda8da6;
            /* height: 100x; */
            display: flex;
            justify-content: space-around;
            -webkit-box-shadow: 8px 8px 21px -10px rgba(66, 68, 90, 1);
            -moz-box-shadow: 8px 8px 21px -10px rgba(66, 68, 90, 1);
            box-shadow: 8px 8px 21px -10px rgba(66, 68, 90, 1); 

        }

        h1 {
            font-stretch: expanded;
        }

        .left,
        .right {
            float: left;
            height: 100%;
            height: 600px;
            align-self: center;
            overflow: hidden;
        }

        .center {
            float: left;
            background-color: #fbefbf;
            padding-left: 20px;
            padding-right: 20px;
            -webkit-box-shadow: 8px 8px 21px -10px rgba(66, 68, 90, 1);
            -moz-box-shadow: 8px 8px 21px -10px rgba(66, 68, 90, 1);
            box-shadow: 8px 8px 21px -10px rgba(66, 68, 90, 1); 
            height: 100%;
        }

        body {
            background-color: #ffffe8;
            font-family: Verdana, Geneva, Tahoma, sans-serif;

        }

        section {
            padding: 10px;
            margin: 10px;
            border-radius: 10px;
            background-color: white;
            -webkit-box-shadow: 8px 8px 21px -10px rgba(66, 68, 90, 1);
            -moz-box-shadow: 8px 8px 21px -10px rgba(66, 68, 90, 1);
            box-shadow: 8px 8px 21px -10px rgba(66, 68, 90, 1); 
            
        }
        img{
            opacity: 1;
            animation: fade 1s linear;
        }

        @keyframes fade {
        100% { opacity: 1 }
        0% { opacity: 0 }
       
        }

        .navcontainer {
            cursor: pointer;
            display: flex;
            align-items: end;
        }
        span {
            padding: 60px;
        }
        .photo { 
            display: flex;
            justify-content: center;
            border-radius: 20px;
            overflow:hidden;
        }
        img {
            border-radius: 10px;
        }
       
        .rest{
            display: flex;
            justify-content: center;
        }
        .buttons{
            display: flex;
    justify-content: space-between;
    align-items: center;
    flex-direction: row-reverse;

        }
        .buttons button{
            margin: 10px;
        }
        .order-form{
            margin-bottom: 40px;
        }
        input{
            margin: 10px;
        }



        



        table.blueTable {
        margin: 20px;
        text-align: center;
        border-collapse: collapse;
        }
        table.blueTable td, table.blueTable th {
        border: 6px solid #FFFFFF;
        padding: 6px 6px;
        }
        table.blueTable tbody td {
        font-size: 13px;
        }
        table.blueTable tr:nth-child(even) {
        background: #FBEFBF;
        }
        table.blueTable #thead {
        background: #FDD88A;
        background: -moz-linear-gradient(top, #fde2a7 0%, #fddc95 66%, #FDD88A 100%);
        background: -webkit-linear-gradient(top, #fde2a7 0%, #fddc95 66%, #FDD88A 100%);
        background: linear-gradient(to bottom, #fde2a7 0%, #fddc95 66%, #FDD88A 100%);
        }
        table.blueTable #thead th {
        font-size: 15px;
        font-weight: bold;
        color: #FFFFFF;
        }
        table.blueTable tfoot {
        font-size: 14px;
        font-weight: bold;
        color: #FFFFFF;
        }
        table.blueTable tfoot td {
        font-size: 14px;
        }
        table.blueTable tfoot .links {
        text-align: right;
        }
        table.blueTable tfoot .links a{
        display: inline-block;
        background: #FDC12D;
        color: #FFFFFF;
        padding: 2px 8px;
        border-radius: 5px;
}
       </style>

</head>

<body>
    <div class="header">
        <h1>Super maszyny w Januszex-Express!</h1>

        <div class="buttons"><button class="btn" onclick="{window.location = '/User/GetLoginPage'}" >Zaloguj</button>
            <button class="btn" onclick="{window.location = '/User/GetRegisterPage'}">Zarejestruj</button></div>

    </div>
    <div class="rest" id="rest">
        <div class="center" id="center">

            <section class="description" id="section2">Brak zamówień!</section>

        </div>
    </div>
</body>

<script type="text/javascript">
    
    const submit = document.getElementById("submit");
    const form = document.getElementById("form");

    var translation = {
        "id": "Numer Zamówienia",
        "userId": "Identyfikator użytkownika",
        "user": "",
        "machineId": "Identyfikator maszyny",
        "machine": "",
        "startDate": "Data rozpoczęcia",
        "endDate": "Data zakończenia ",
        "totalPrice": "Cena całkowita",
        "totalTime": "Całkowity czas wypożyczenia"
    }
    var hidden = ["user", "machine"];

    async function get() {
        //wziac token
        const cookieValue = document.cookie
        .split("; ")
        .find((row) => row.startsWith("token="))
        ?.split("=")[1];


        const response = await fetch("/Order/MyOrders", {
            headers: {Authorization: `Bearer ${cookieValue}`}
            });
        const jsn = await response.json();
        if(response.status==404){
           
            return;
        }
        else{
            let container = document.getElementById("section2");
            container.style.visibility="hidden";
            console.log(jsn);
            transform(jsn);
            return jsn;
        }
        
    }

    function transform(jsn){
        var jsonData = jsn;
        
        // Get the container element where the table will be inserted
         let container = document.getElementById("center");
         
         // Create the table element
         let table = document.createElement("table");
         table.className="blueTable";
         
         console.log(jsonData);

         jsonData = jsonData["$values"]
         // Get the keys (column names) of the first object in the JSON data
         let cols = Object.keys(jsonData[0]);
         
        

         // Create the header element
         let thead = document.createElement("thead");
         
         let tr = document.createElement("tr");
         tr.id="thead";
         // Loop through the column names and create header cells
         cols.forEach((item) => {
            if(!hidden.includes(item)){
                let th = document.createElement("th");
                th.innerText = translation[item]; // Set the column name as the text of the header cell
                tr.appendChild(th); // Append the header cell to the header row
            }
         });
         thead.appendChild(tr); // Append the header row to the header
         table.append(tr) // Append the header to the table
         
         // Loop through the JSON data and create table rows
         jsonData.forEach((item) => {
            delete item['user'];
            delete item['machine'];
            if(!hidden.includes(item)){
            let tr = document.createElement("tr");
            
            // Get the values of the current object in the JSON data
            let vals = Object.values(item);
            
            // Loop through the values and create table cells
            vals.forEach((elem) => {

               let td = document.createElement("td");
               td.innerText = elem; // Set the value as the text of the table cell
               tr.appendChild(td); // Append the table cell to the table row

            });
            table.appendChild(tr); // Append the table row to the table
        }
         });
         container.appendChild(table) // Append the table to the container element
      }



      get();

</script>

</html>